<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Operations â€” Bee Planet Connection</title>
  <meta name="description" content="Inspections, equipment, colony management, harvest &amp; processing, safety, and seasonal planning." />
  <link rel="stylesheet" href="../../../../../../../css/site.css" />
  <link rel="stylesheet" href="../../../../../../../css/wiki.css" />
  <script src="../../../../../../../js/ga.js" defer></script>
  <style>
    .wrap { max-width: 1100px; margin: 0 auto; padding: 1rem; }
    .hero { margin: .5rem 0 1rem; }
    .lede { color:#555; }
    .grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:1rem; }
    .card { border:1px solid #e5e5e5; border-radius:10px; padding:1rem; background:#fff; }
    .list-slim { list-style:none; padding-left:0; margin:.5rem 0 0; }
    .list-slim li { margin:.35rem 0; }
    .muted { color:#666; font-size:.9rem; }
    .badge { display:inline-block; background:#FBBE32; color:#000; font-weight:700; text-decoration:none; padding:.4rem .7rem; border-radius:10px; }
  </style>
</head>
<body class="wallpaper wiki">
<header class="site-header" role="banner">
  <div class="container">
    <a class="brand" href="../../../../../../../">
      <img class="brand-logo" src="../../../../../../../img/logo.svg" alt="Bee Planet Connection" />
      <span class="brand-text">Bee Planet Connection</span>
    </a>
    <nav class="nav" role="navigation" aria-label="Primary">
      <a href="../../../../../../../">Home</a>
      <a href="../../../../../../../wiki/">Wiki</a>
      <a href="../../../../../../../tools/">Tools</a>
      <a href="../../../../../../../directory/">Directory</a>
      <a href="../../../../../../../blog/">Blog</a>
      <a href="../../../../../../../about/">About</a>
      <a href="../../../../../../../contact/">Contact</a>
      <a href="../../../../../../../forum/">Forum</a>
    </nav>
  </div>
</header>

<main class="wrap" id="main">
  <nav class="crumbs" aria-label="Breadcrumb">
    <a href="../../../../../../../wiki/">Wiki</a> â€º Operations
  </nav>

  <section class="hero">
    <h1>Operations</h1>
    <p class="lede">Inspections, hive hardware, colony management, harvest &amp; processing, safety, and seasonal planning.</p>
    <p><a class="badge" href="/wiki/operations/cornerstone.html">Read the cornerstone</a></p>
  </section>

  <section aria-labelledby="paths-title">
    <h2 id="paths-title">Browse by experience level</h2>
    <div class="grid" style="margin-top: .5rem;">
      <div class="card">
        <h3>Newcomer</h3>
        <p>Step-by-step how-tos and checklists for safe, effective hive work.</p>
        <ul class="list-slim" id="newcomer-list" aria-live="polite"><li class="muted">Loadingâ€¦</li></ul>
      </div>
      <div class="card">
        <h3>Intermediate</h3>
        <p>Planning supers, swarm prevention, equipment care, and record-keeping.</p>
        <ul class="list-slim" id="intermediate-list" aria-live="polite"><li class="muted">Loadingâ€¦</li></ul>
      </div>
      <div class="card">
        <h3>Advanced</h3>
        <p>Refined management techniques, complex manipulations, and optimization.</p>
        <ul class="list-slim" id="advanced-list" aria-live="polite"><li class="muted">Loadingâ€¦</li></ul>
      </div>
    </div>
    <p class="muted" style="margin-top:.75rem">Lists are built from <code>/wiki/meta/taxonomy-full.json</code>.</p>
  </section>

  <section aria-labelledby="recent-title" style="margin-top:1.25rem">
    <h2 id="recent-title">Recently added in Operations</h2>
    <ul class="list-slim" id="recent-list" aria-live="polite"><li class="muted">Loadingâ€¦</li></ul>
  </section>
</main>

<script>
(function(){
  const LEVEL_MAP = {
    newcomer: document.getElementById('newcomer-list'),
    intermediate: document.getElementById('intermediate-list'),
    advanced: document.getElementById('advanced-list')
  };
  const recentList = document.getElementById('recent-list');

  const linkFor = (it) => {
    if (it && typeof it.url === 'string' && it.url.startsWith('/')) return it.url;
    const slug = String(it?.slug || '').replace(/^\//,'');
    if (!slug) return '#';
    return `/wiki/operations/${slug.endsWith('.html') ? slug : slug + '.html'}`;
  };

  const renderBucket = (ul, list) => {
    if (!ul) return;
    ul.innerHTML = '';
    if (!list.length){ ul.innerHTML = '<li class="muted">Nothing here yet.</li>'; return; }
    const seen = new Set();
    for (const it of list){
      if (!it.slug || seen.has(it.slug)) continue;
      seen.add(it.slug);
      const li = document.createElement('li');
      const a = document.createElement('a');
      a.href = linkFor(it);
      a.textContent = it.title || it.slug.replace(/[-_]/g,' ');
      a.rel = 'bookmark';
      li.appendChild(a);
      if (it.summary){
        const span = document.createElement('span');
        span.className = 'muted';
        span.textContent = ' â€” ' + it.summary;
        li.appendChild(span);
      }
      ul.appendChild(li);
    }
  };

  // NOTE: meta (no underscore) to match your repository
  fetch('/wiki/meta/taxonomy-full.json', { cache: 'no-store' })
    .then(r => { if (!r.ok) throw new Error('HTTP ' + r.status); return r.json(); })
    .then(json => {
      const items = Array.isArray(json) ? json : [json];
      const ops = items.filter(x => (x.pillar || '').toLowerCase() === 'operations');

      const buckets = { newcomer: [], intermediate: [], advanced: [] };
      for (const it of ops){
        const level = (it.level || '').toLowerCase();
        if (buckets[level]) buckets[level].push(it);
      }

      renderBucket(LEVEL_MAP.newcomer, buckets.newcomer);
      renderBucket(LEVEL_MAP.intermediate, buckets.intermediate);
      renderBucket(LEVEL_MAP.advanced, buckets.advanced);

      const dated = ops
        .map(it => ({ ...it, _d: new Date(it.updated || 0).getTime() || 0 }))
        .sort((a,b) => (b._d - a._d) || String(a.title||'').localeCompare(String(b.title||'')))
        .slice(0, 8);

      renderBucket(recentList, dated);
    })
    .catch(err => {
      console.error('Operations listing failed:', err);
      Object.values(LEVEL_MAP).forEach(ul => { if (ul) ul.innerHTML = '<li class="muted">Could not load. Try a hard refresh.</li>'; });
      if (recentList) recentList.innerHTML = '<li class="muted">Could not load. Try a hard refresh.</li>';
    });
})();
</script>
</body>
</html>

